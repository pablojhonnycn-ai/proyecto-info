<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="index.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="script.js" defer></script>
  <title>Info</title>
</head>
<body>
  <!-- Contenedor principal -->
  <div class="contenedor">
    
    <!-- Header -->
    <header class="titulo">
      <div class="info">Info</div>
      <div class="cole"></div>
    </header>  

    

    <!-- Sección scroll vertical -->
    <section class="scroll-vertical" id="scroll-vertical">
      <div class="fecha" id="fecha">hola</div>
      <div class="imagenes" id="imagenes">
        <!-- Aquí se cargarán las imágenes dinámicamente -->
      </div>
      

      <div class="sections" >
      <a class="links-" href="./login.html">admin</a>
      <a class="links-" href="./v-comunicados.html">comunicados</a>
    </div>
      <div class="secciones" id="secciones">
      </div>
    </section>  

      
    
  </div> <!-- fin del contenedor -->

  <!-- Script para cargar el feed -->
  <script>
    async function cargarFeed() {
      try {
        const res = await fetch('/feed');
        const datos = await res.json();
        const contenedor = document.getElementById('imagenes');
        contenedor.innerHTML = ''; // limpiar contenido previo

        datos.forEach(item => {
          const div = document.createElement('div');
          div.classList.add('imagen');
          div.innerHTML = `
        <img class="img" src="${item.url}" alt="${item.descripcion}" style="width:100%; height:70%;">
        <p class="fechap">Publicado: ${new Date(item.fecha_subida).toLocaleDateString()}</p>
        <p class="descripcion">${item.descripcion}</p>
      `;

          contenedor.appendChild(div); // agregar dentro del div.imagenes
        });
      } catch (err) {
        console.error('Error cargando el feed:', err);
      }
    }

    // Cargar el feed al iniciar la página
    cargarFeed();
  </script>

  

</body>
</html>